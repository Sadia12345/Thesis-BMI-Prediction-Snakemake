---
title: "ML Results"
date: "`r Sys.Date()`"
output:
  html_document:
    keep_md: true
    self_contained: true
    theme: spacelab
params:
  dataset: "metalog_test"
  ml_methods: !r c("glmnet", "rf")
  nseeds: 10
  ncores: 1
  kfold: 2
  config_path: "config/config.yaml"
  find_feature_importance: TRUE
---

```{r setup, include=FALSE}
schtools::set_knitr_opts()
library(knitr)
# FORCE absolute paths - Hardcoded
figures_dir <- "D:/Thesis_Project/mikropml-snakemake-workflow/figures"
figures_dir <- file.path(figures_dir, params$dataset)

# Helper to get absolute path
get_fig_path <- function(filename) {
  file.path(figures_dir, filename)
}
```

# Model Performance

```{r results, echo=FALSE, message=FALSE, warning=FALSE, out.width="100%"}
# include_graphics(get_fig_path("rulegraph.png"))
include_graphics(get_fig_path("performance.png"))
include_graphics(get_fig_path("roc_curves.png"))

hp_paths <- file.path(figures_dir, paste0("hp_performance_", params$ml_methods, ".png"))
include_graphics(hp_paths)

if (isTRUE(params$find_feature_importance)) {
    cat("## Feature Importance")
}
include_graphics(get_fig_path("feature_importance.png"))
include_graphics(get_fig_path("benchmarks.png"))
```